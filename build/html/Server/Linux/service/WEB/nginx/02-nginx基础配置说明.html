

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>10.9. nginx基础配置说明 &mdash; 张志佳的技术文档 1.0 文档</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../../../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../../../search.html" />
    <link rel="next" title="10.10. nginx虚拟主机三种实现方式" href="03-nginx虚拟主机三种实现方式.html" />
    <link rel="prev" title="10.8. nginx安装" href="01-nginx安装.html" /> 

  
  <script src="../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../index.html" class="icon icon-home"> 张志佳的技术文档
          

          
            
            <img src="../../../../../_static/logo-wordmark-light.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2018-09-06
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../Language.html">编程语言学习</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../Language/Python.html">Python学习</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../Language/Python/index.html">1. Python基础</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/02环境准备.html">1.1. Python开发环境搭建</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/03内置常量.html">1.2. 内置常量</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/04内置类型.html">1.3. 内置类型</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/05内建函数.html">1.4. 内建函数 </a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/06内置异常.html">1.5. 内置异常</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/07字符串处理.html">1.6. 文本处理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/08数据类型.html">1.7. 数据类型</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/09数值模块.html">1.8. 数值模块</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/10函数式编程模块.html">1.9. 函数式编程模块</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/11文件和目录访问.html">1.10. 文件和目录访问</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/12数据持久化.html">1.11. 数据持久化</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/13数据压缩和归档.html">1.12. 数据压缩和归档</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/14文件格式.html">1.13. 文件格式</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/15加密服务.html">1.14. 加密服务</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/16通用操作系统服务.html">1.15. 通用操作系统服务</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/17并发执行.html">1.16. 并发执行</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/18进程通信和网络.html">1.17. 进程通信和网络</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/19网络数据处理.html">1.18. 网络数据处理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/20结构化文本文档处理工具.html">1.19. 结构化文本文档处理工具</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Python/base/21二进制处理.html">1.20. 二进制处理</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../Language/Python/index.html#python-libs">2. Python常用第三方库</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../Language/Algorithm.html">算法学习(Algorithm)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../Language/Algorithm/index.html">树(tree)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Algorithm/tree/indroduction.html">树(tree)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../Language/Algorithm/index.html#ccf">CCF考试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Algorithm/ccf/201703-1.html">2017031-分蛋糕</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Algorithm/ccf/201703-2.html">2017032-学生排队</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Algorithm/ccf/201712-4.html">2017124-行车路线</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Algorithm/ccf/201803-1.html">2018031-跳一跳</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../Language/Shell.html">Shell 编程</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../Language/Shell/1.base.html">1. Shell编程基础</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Shell/1.base.html#shell-about">1.1. Shell编程简介</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Shell/1.base.html#shell-demo">1.2. 入门样例</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Shell/1.base.html#shell-stander">1.3. Shell规范</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Shell/1.base.html#shell-cmd">1.4. Shell基础语句</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../Language/Shell/1.base.html#id21">1.5. Shell調試</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../Language/Shell/2.advance.html">2. Shell编程高级用法</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Network.html">计算机网络学习</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../Network/1.NetworkTheory.html">理论学习</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../Network/2.HuaWei.html">华为</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../Network/3.H3C.html">H3C(华三/新华三)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../Network/4.CISCO.html">思科(CISCO)</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../Server.html">服务器相关学习</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../1.AboutAndClass.html">服务器相关常识</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../../2.Linux.html">Linux 服务器</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../1.cmd.html">Linux命令汇总</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/Ctrl+d.html">1. Ctrl+d</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/alias.html">2. alias</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/basename.html">3. basename</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/bc.html">4. bc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/bg.html">5. bg</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/cal.html">6. cal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/cat.html">7. cat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/cd.html">8. cd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/chage.html">9. chage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/chattr.html">10. chattr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/chgrp.html">11. chgrp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/chkconfig.html">12. chkconfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/chmod.html">13. chmod</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/chown.html">14. chown</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/clear.html">15. clear</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/cp.html">16. cp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/crontab.html">17. crontab</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/cut.html">18. cut</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/date.html">19. date</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/dd.html">20. dd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/df.html">21. df</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/diff.html">22. diff</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/dig.html">23. dig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/dirname.html">24. dirname</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/dmesg.html">25. dmesg</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/dos2unix.html">26. dos2unix</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/du.html">27. du</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/dump.html">28. dump</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/dumpe2fs.html">29. dumpe2fs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/e2fsck.html">30. e2fsck</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/echo.html">31. echo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/eject.html">32. eject</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/exec.html">33. exec</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/exit.html">34. exit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/export.html">35. export</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/fdisk.html">36. fdisk</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/fg.html">37. fg</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/file.html">38. file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/find.html">39. find</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/finger.html">40. finger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/free.html">41. free</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/fsck.html">42. fsck</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/grep.html">43. grep</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/groupadd.html">44. groupadd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/gzip.html">45. gzip</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/halt.html">46. halt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/head.html">47. head</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/history.html">48. history</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/host.html">49. host</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/hostname.html">50. hostname</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/iconv.html">51. iconv</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/id.html">52. id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/ifconfig.html">53. ifconfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/ifdown.html">54. ifdown</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/ifup.html">55. ifup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/init.html">56. init</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/iostat.html">57. iostat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/ipcrm.html">58. ipcrm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/ipcs.html">59. ipcs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/jobs.html">60. jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/join.html">61. join</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/kill.html">62. kill</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/killall.html">63. killall</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/last.html">64. last</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/lastlog.html">65. lastlog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/less.html">66. less</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/locate.html">67. locate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/logout.html">68. logout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/ls.html">69. ls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/lsattr.html">70. lsattr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/lsof.html">71. lsof</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/ltrace.html">72. ltrace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/mail.html">73. mail</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/md5sum.html">74. md5sum</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/mkdir.html">75. mkdir</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/mkfs.html">76. mkfs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/mkswap.html">77. mkswap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/more.html">78. more</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/mount.html">79. mount</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/mpstat.html">80. mpstat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/mutt.html">81. mutt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/mv.html">82. mv</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/nc.html">83. nc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/netstat.html">84. netstat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/nice.html">85. nice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/nmap.html">86. nmap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/nohup.html">87. nohup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/nslookup.html">88. nslookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/parted.html">89. parted</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/partprobe.html">90. partprobe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/passwd.html">91. passwd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/paste.html">92. paste</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/pgrep.html">93. pgrep</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/ping.html">94. ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/pkill.html">95. pkill</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/poweroff.html">96. poweroff</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/printf.html">97. printf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/ps.html">98. ps</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/pstree.html">99. pstree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/pwd.html">100. pwd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/rename.html">101. rename</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/resize2fs.html">102. resize2fs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/rev.html">103. rev</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/rm.html">104. rm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/rmdir.html">105. rmdir</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/route.html">106. route</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/rpm.html">107. rpm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/runlevel.html">108. runlevel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/sar.html">109. sar</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/scp.html">110. scp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/service.html">111. service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/shutdown.html">112. shutdown</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/sort.html">113. sort</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/split.html">114. split</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/ss.html">115. ss</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/ssh.html">116. ssh</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/stat.html">117. stat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/strace.html">118. strace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/su.html">119. su</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/sudo.html">120. sudo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/swapoff.html">121. swapoff</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/swapon.html">122. swapon</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/sync.html">123. sync</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/tac.html">124. tac</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/tail.html">125. tail</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/tar.html">126. tar</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/tcpdump.html">127. tcpdump</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/telnet.html">128. telnet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/time.html">129. time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/top.html">130. top</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/touch.html">131. touch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/tr.html">132. tr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/traceroute.html">133. traceroute</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/tree.html">134. tree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/type.html">135. type</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/umask.html">136. umask</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/umount.html">137. umount</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/unalias.html">138. unalias</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/uname.html">139. uname</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/uniq.html">140. uniq</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/unset.html">141. unset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/unzip.html">142. unzip</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/uptime.html">143. uptime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/useradd.html">144. useradd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/userdel.html">145. userdel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/usermod.html">146. usermod</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/users.html">147. users</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/vi.html">148. vi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/vimdiff.html">149. vimdiff</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/visudo.html">150. visudo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/vmstat.html">151. vmstat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/w.html">152. w</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/watch.html">153. watch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/wc.html">154. wc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/wget.html">155. wget</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/whereis.html">156. whereis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/which.html">157. which</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/who.html">158. who</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/whoami.html">159. whoami</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/xargs.html">160. xargs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/yum.html">161. yum</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../cmd/zip.html">162. xxxx</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../2.base.html">Linux基础</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../base/01-Linux简介.html">1. Linux 简介</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/02-Linux入门.html">2. 计算机简述</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/03-文件系统.html">3. Linux文件系统</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/04-Bash特性.html">4. bash的基础特性</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/05-linux用户组管理.html">5. linux用户和组管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/07-grep正则表达式.html">6. grep正则表达式</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/08-Linux文件查找.html">7. Linux文件查找</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/09-Vim编辑器.html">8. Vim编辑器</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/10-Linux磁盘管理.html">9. Linux磁盘管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/11-Linux文件权限.html">10. Linux文件权限</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/12-RAID.html">11. RAID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/13-LVM.html">12. LVM逻辑卷 </a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/14-Btrfs文件系统.html">13. Btrfs文件系统</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/15-解压缩.html">14. 解压缩</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/16-Linux程序包管理.html">15. Linux程序包管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/16-Linux系统程序包管理.html">16. Linux系统程序包管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/17-Linux系统网络属性管理.html">17. Linux系统网络属性管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/17-Linux系统网络管理.html">18. Linux系统网络管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/18-Linux进程管理.html">19. Linux进程管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/19-Linux任务计划.html">20. Linux任务计划</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/20-CentOS启动流程与Grub.html">21. CentOS启动流程与Grub</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/21-Linux Kernel.html">22. Linux Kernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/22-文本处理工具之sed,awk.html">23. 文本处理工具之sed,awk</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/23-Openssl.html">24. Openssl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/24-Nssitch、pam.html">25. Nssitch、pam</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/25-文件共享服务.html">26. 文件共享服务</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/26-DNS域名解析服务.html">27. DNS域名解析服务</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/27-Linux系统防火墙.html">28. Linux系统防火墙</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/28-LinuxSyslog系统日志管理.html">29. Linux Syslog系统日志管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../base/29-WebServices.html">30. Web Service</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../3.service.html">Linux服务器</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../DHCP/index.html">1. dhcp服务</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Rsync同步/index.html">2. Rsync同步</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../自动化安装/index.html">3. 自动化安装</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../自动化运维/index.html">4. 自动化运维</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../安全和监控/index.html">5. 安全和监控</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../远程登陆/index.html">6. 远程登陆</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../认证/index.html">7. 认证</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../DNS/index.html">8. DNS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../数据库/index.html">9. 数据库</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../index.html">10. WEB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../日志管理/index.html">11. 日志管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../网络文件共享/index.html">12. 网络文件共享</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../版本控制/index.html">13. 版本控制</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../集群/index.html">14. 集群</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../容器/index.html">15. 容器</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../虚拟化/index.html">16. 虚拟化</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../杂项/index.html">17. 杂项</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../3.Unix.html">Unix 和类Unix</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../4.Windows.html">Windows 服务器</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../5.Optimization.html">服务器优化</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../6.FAQ.html">常见问题及解决(FAQ)</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Data.html">数据相关/大数据</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../Data/index.html">数据相关/大数据</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../MachineLearning.html">机器学习</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../MachineLearning/index.html">机器学习入门</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ToolsOpenSource.html">工具和开源项目</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../ToolsOpenSource/1.Tools.html">常用工具汇总</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../ToolsOpenSource/Tools/index.html">用reStructuredText实践</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../ToolsOpenSource/Tools/rST/1.index.html">1. reST简介</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../ToolsOpenSource/Tools/rST/2.install.html">2. reST安装及环境配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../ToolsOpenSource/Tools/rST/3.grammar.html">3. reST语法学习</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../ToolsOpenSource/Tools/rST/4.toOthers.html">4. 格式转换</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../ToolsOpenSource/Tools/rST/5.API.html">5. 文档API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../ToolsOpenSource/Tools/rST/6.rstTools.html">6. reST工具</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../ToolsOpenSource/Tools/rST/7.addFunctions.html">7. 其他</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../ToolsOpenSource/Tools/index.html#markdown">用MarkDown实践</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../ToolsOpenSource/Tools/MarkDown/MarkDownTools.html">1. MarkDown常用工具</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../ToolsOpenSource/2.OpenSource.html">关注的开源项目</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Others.html">其他杂项</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../Others/index.html">电脑疑难杂症</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../log.html">更新日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../AboutMe.html">关于我</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">张志佳的技术文档</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../../../Server.html">服务器相关学习</a> &raquo;</li>
        
          <li><a href="../../../../2.Linux.html">Linux 服务器</a> &raquo;</li>
        
          <li><a href="../../../3.service.html">Linux服务器</a> &raquo;</li>
        
          <li><a href="../../index.html">&lt;no title&gt;</a> &raquo;</li>
        
          <li><a href="../index.html">10. WEB</a> &raquo;</li>
        
      <li>10.9. nginx基础配置说明</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="03-nginx虚拟主机三种实现方式.html" class="btn btn-neutral float-right" title="10.10. nginx虚拟主机三种实现方式" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="01-nginx安装.html" class="btn btn-neutral" title="10.8. nginx安装" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nginx">
<h1>10.9. nginx基础配置说明<a class="headerlink" href="#nginx" title="永久链接至标题">¶</a></h1>
<div class="section" id="id1">
<h2>10.9.1. 核心模块<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<div class="section" id="user">
<h3>10.9.1.1. user<a class="headerlink" href="#user" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     user user [group];
Default:
user nobody nobody;
Context:    main
</pre></div>
</div>
<p>默认值是nobody，但是rpm包编译都是指定的nginx了， 即使你没有指定该配置也是nginx。</p>
</div>
<div class="section" id="pid">
<h3>10.9.1.2. pid<a class="headerlink" href="#pid" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     pid file;
Default:
pid logs/nginx.pid;
Context:    main
</pre></div>
</div>
<p>这个配置项指定了nginx的master主进程的进程id存储的文件。</p>
</div>
<div class="section" id="include">
<h3>10.9.1.3. include<a class="headerlink" href="#include" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     include file | mask;
Default:    —
Context:    any
</pre></div>
</div>
<p>包含特定的配置文件到当前文件中来。</p>
</div>
<div class="section" id="load-module">
<h3>10.9.1.4. load_module<a class="headerlink" href="#load-module" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     load_module file;
Default:    —
Context:    main
This directive appeared in version 1.9.11.
</pre></div>
</div>
<p>加载特定的模块进来。</p>
</div>
<div class="section" id="worker-cpu-affinity">
<h3>10.9.1.5. worker_cpu_affinity<a class="headerlink" href="#worker-cpu-affinity" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     worker_cpu_affinity cpumask ...;
worker_cpu_affinity auto [cpumask];
Default:    —
Context:    main
样例：
    worker_processes    4;
    worker_cpu_affinity 0001 0010 0100 1000;
</pre></div>
</div>
</div>
<div class="section" id="worker-processes">
<h3>10.9.1.6. worker_processes<a class="headerlink" href="#worker-processes" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     worker_processes number | auto;
Default:
worker_processes 1;
Context:    main
</pre></div>
</div>
<p>定义下worker进程的个数， auto的话就是cpu的个数。</p>
</div>
<div class="section" id="worker-priority">
<h3>10.9.1.7. worker_priority<a class="headerlink" href="#worker-priority" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     worker_priority number;
Default:
worker_priority 0;
Context:    main
</pre></div>
</div>
<p>指定工作进程的优先级的， 数值越大，优先级越低。</p>
</div>
<div class="section" id="worker-rlimit-nofile">
<h3>10.9.1.8. worker_rlimit_nofile<a class="headerlink" href="#worker-rlimit-nofile" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     worker_rlimit_nofile number;
Default:    —
Context:    main
</pre></div>
</div>
<p>每个worker进程可以打开的文件数量。</p>
</div>
<div class="section" id="worker-connections">
<h3>10.9.1.9. worker_connections<a class="headerlink" href="#worker-connections" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     worker_connections number;
Default:
worker_connections 512;
Context:    events
</pre></div>
</div>
<p>工作进程的连接数量。</p>
</div>
<div class="section" id="use">
<h3>10.9.1.10. use<a class="headerlink" href="#use" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     use method;
Default:    —
Context:    events
样例：
    use epoll;
</pre></div>
</div>
<p>指明并发连接请求的处理方法，默认自动选择最优方法</p>
</div>
<div class="section" id="accept-mutex">
<h3>10.9.1.11. accept_mutex<a class="headerlink" href="#accept-mutex" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     accept_mutex on | off;
Default:
accept_mutex off;
Context:    events
</pre></div>
</div>
<p>处理新连接请求的方法， on代表有新连接的时候，唤醒所有worker进程，但是只有一个获得连接。</p>
</div>
<div class="section" id="daemon">
<h3>10.9.1.12. daemon<a class="headerlink" href="#daemon" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     daemon on | off;
Default:
daemon on;
Context:    main
</pre></div>
</div>
<p>on代表nginx后台运行的，off代表前台运行。</p>
</div>
<div class="section" id="master-process">
<h3>10.9.1.13. master_process<a class="headerlink" href="#master-process" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     master_process on | off;
Default:
master_process on;
Context:    main
</pre></div>
</div>
<p>是否以master/worker模型去运行nginx, 默认为on,off将不启动worker。</p>
</div>
<div class="section" id="error-log">
<h3>10.9.1.14. error_log<a class="headerlink" href="#error-log" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     error_log file [level];
Default:
error_log logs/error.log error;
Context:    main, http, mail, stream, server, location
</pre></div>
</div>
<p>指定错误日志位置的，可以指定到stderr,syslog,memory。</p>
</div>
</div>
<div class="section" id="id2">
<h2>10.9.2. 标准模块<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<div class="section" id="listen">
<h3>10.9.2.1. listen<a class="headerlink" href="#listen" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     listen address[:port] [default_server] [ssl] [http2 | spdy] [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [ipv6only=on|off] [reuseport] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];
listen port [default_server] [ssl] [http2 | spdy] [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [ipv6only=on|off] [reuseport] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];
listen unix:path [default_server] [ssl] [http2 | spdy] [proxy_protocol] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];
Default:
listen *:80 | *:8000;
Context:    server
</pre></div>
</div>
<p>指定监听地址。</p>
</div>
<div class="section" id="server-name">
<h3>10.9.2.2. server_name<a class="headerlink" href="#server-name" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     server_name name ...;
Default:
server_name &quot;&quot;;
Context:    server
</pre></div>
</div>
<p>指定主机名字</p>
<p>匹配优先级机制从高到低：</p>
<ol class="arabic simple">
<li>首先是字符串精确匹配 如：www.magedu.com</li>
<li>左侧*通配符 如：*.magedu.com</li>
<li>右侧*通配符 如：www.magedu.*</li>
<li>正则表达式 如： ~^.*.magedu.com$</li>
<li>default_server</li>
</ol>
</div>
<div class="section" id="root">
<h3>10.9.2.3. root<a class="headerlink" href="#root" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     root path;
Default:
root html;
Context:    http, server, location, if in location
</pre></div>
</div>
<p>指定根位置的</p>
</div>
<div class="section" id="tcp-nodelay">
<h3>10.9.2.4. tcp_nodelay<a class="headerlink" href="#tcp-nodelay" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     tcp_nodelay on | off;
Default:
tcp_nodelay on;
Context:    http, server, location
</pre></div>
</div>
<p>keepalived模式下是不是延迟发送，将多个请求合并在发送。</p>
</div>
<div class="section" id="sendfile">
<h3>10.9.2.5. sendfile<a class="headerlink" href="#sendfile" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     sendfile on | off;
Default:
sendfile off;
Context:    http, server, location, if in location
</pre></div>
</div>
<p>是否开启sendfile功能， 在内核中封装报文直接发送，默认是off的。</p>
</div>
<div class="section" id="server-tokens">
<h3>10.9.2.6. server_tokens<a class="headerlink" href="#server-tokens" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     server_tokens on | off | build | string;
Default:
server_tokens on;
Context:    http, server, location
</pre></div>
</div>
<p>是否在响应报文的server首部显示nginx版本信息。</p>
</div>
<div class="section" id="location">
<h3>10.9.2.7. location<a class="headerlink" href="#location" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     location [ = | ~ | ~* | ^~ ] uri { ... }
location @name { ... }
Default:    —
Context:    server, location
</pre></div>
</div>
<p>在一个server中location配置端可以有多个，用于实现从uri到文件系统的路径映射，找到最佳的应用配置。</p>
<p>匹配优先级从高到低： =, ^~, ～/～*, 不带符号</p>
</div>
<div class="section" id="alias">
<h3>10.9.2.8. alias<a class="headerlink" href="#alias" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     alias path;
Default:    —
Context:    location
</pre></div>
</div>
<p>定义路径别名的，文档映射的另外一种机制。</p>
</div>
<div class="section" id="index">
<h3>10.9.2.9. index<a class="headerlink" href="#index" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     index file ...;
Default:
index index.html;
Context:    http, server, location
</pre></div>
</div>
<p>指定默认网页的，默认值是index.html</p>
</div>
<div class="section" id="error-page">
<h3>10.9.2.10. error_page<a class="headerlink" href="#error-page" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     error_page code ... [=[response]] uri;
Default:    —
Context:    http, server, location, if in location
样例配置：
    error_page 404             /404.html;
    error_page 500 502 503 504 /50x.html;
    error_page 404 =200 /empty.gif;
</pre></div>
</div>
<p>定义错误页的。</p>
</div>
<div class="section" id="try-files">
<h3>10.9.2.11. try_files<a class="headerlink" href="#try-files" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     try_files file ... uri;
try_files file ... =code;
Default:    —
Context:    server, location
样例：
    location / {
        try_files $uri $uri/index.html $uri.html =404;
    }
</pre></div>
</div>
<p>是否在响应报文的server首部显示nginx版本信息。</p>
</div>
<div class="section" id="keepalive-timeout">
<h3>10.9.2.12. keepalive_timeout<a class="headerlink" href="#keepalive-timeout" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     keepalive_timeout timeout [header_timeout];
Default:
keepalive_timeout 75s;
Context:    http, server, location
</pre></div>
</div>
<p>设定保存连接超时时长，0表示禁止长连接，默认是75s。</p>
</div>
<div class="section" id="keepalive-requests">
<h3>10.9.2.13. keepalive_requests<a class="headerlink" href="#keepalive-requests" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     keepalive_requests number;
Default:
keepalive_requests 100;
Context:    http, server, location
This directive appeared in version 0.8.0.
</pre></div>
</div>
<p>在一次长连接上所运行请求的资源的最大数量，默认是100。</p>
</div>
<div class="section" id="keepalive-disable">
<h3>10.9.2.14. keepalive_disable<a class="headerlink" href="#keepalive-disable" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     keepalive_disable none | browser ...;
Default:
keepalive_disable msie6;
Context:    http, server, location
</pre></div>
</div>
<p>对特定浏览器禁用长连接。</p>
</div>
<div class="section" id="send-timeout">
<h3>10.9.2.15. send_timeout<a class="headerlink" href="#send-timeout" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     send_timeout time;
Default:
send_timeout 60s;
Context:    http, server, location
</pre></div>
</div>
<p>向客户端发送响应报文的超时时长，此处是指两次写操作之间的间隔时长，而非整个响应过程的传输时长。</p>
</div>
<div class="section" id="client-body-buffer-size">
<h3>10.9.2.16. client_body_buffer_size<a class="headerlink" href="#client-body-buffer-size" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     client_body_buffer_size size;
Default:
client_body_buffer_size 8k|16k;
Context:    http, server, location
</pre></div>
</div>
<p>用于接受每个客户端请求报文的body部分的缓冲区大小，默认为16k,超过这个大小就将其暂存到磁盘上的client_body_temp_path位置。</p>
</div>
<div class="section" id="client-body-temp-path">
<h3>10.9.2.17. client_body_temp_path<a class="headerlink" href="#client-body-temp-path" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     client_body_temp_path path [level1 [level2 [level3]]];
Default:
client_body_temp_path client_body_temp;
Context:    http, server, location
</pre></div>
</div>
<p>设定用于存储客户端请求报文的body部分的临时存储路径及子目录结构和数量</p>
</div>
<div class="section" id="limit-rate">
<h3>10.9.2.18. limit_rate<a class="headerlink" href="#limit-rate" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     limit_rate_after size;
Default:
limit_rate_after 0;
Context:    http, server, location, if in location
This directive appeared in version 0.8.0.
</pre></div>
</div>
<p>用于限制响应给客户端的传输速率，单位是bytes,0代表不限制。</p>
</div>
<div class="section" id="limit-except">
<h3>10.9.2.19. limit_except<a class="headerlink" href="#limit-except" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     limit_except method ... { ... }
Default:    —
Context:    location
样例：
    limit_except GET {
    allow 192.168.1.0/24;
    deny all;
    }
代表处理get,head之外的其他方法，只允许192.168.1.0/24网段访问。
</pre></div>
</div>
<p>限制客户端使用除了特定的请求方法之外的其他方法。</p>
</div>
<div class="section" id="aio">
<h3>10.9.2.20. aio<a class="headerlink" href="#aio" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     aio on | off | threads[=pool];
Default:
aio off;
Context:    http, server, location
This directive appeared in version 0.8.11.
</pre></div>
</div>
<p>是否启用异步io功能。</p>
</div>
<div class="section" id="directio">
<h3>10.9.2.21. directio<a class="headerlink" href="#directio" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     directio size | off;
Default:
directio off;
Context:    http, server, location
This directive appeared in version 0.7.7.
</pre></div>
</div>
<p>大于给定的文件大小的死后，直接同步到磁盘，而非写文件。</p>
</div>
<div class="section" id="open-file-cache">
<h3>10.9.2.22. open_file_cache<a class="headerlink" href="#open-file-cache" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     open_file_cache off;
open_file_cache max=N [inactive=time];
Default:
open_file_cache off;
Context:    http, server, location
</pre></div>
</div>
<p>是否打开文件缓存，需要配合open_file_cache max=N使用，可以缓存的信息如下：</p>
<ul class="simple">
<li>文件元数据信息</li>
<li>打开的目录结构</li>
<li>没有找到的或者没有访问权限的文件的相关信息。</li>
</ul>
</div>
<div class="section" id="open-file-cache-errors">
<h3>10.9.2.23. open_file_cache_errors<a class="headerlink" href="#open-file-cache-errors" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     open_file_cache_errors on | off;
Default:
open_file_cache_errors off;
Context:    http, server, location
</pre></div>
</div>
<p>是否缓存查找时发生错误的文件一类的信息，默认是off。</p>
</div>
<div class="section" id="open-file-cache-min-uses">
<h3>10.9.2.24. open_file_cache_min_uses<a class="headerlink" href="#open-file-cache-min-uses" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     open_file_cache_min_uses number;
Default:
open_file_cache_min_uses 1;
Context:    http, server, location
</pre></div>
</div>
<p>在指定的时常内，至少被明智特定的次数才可以归为活动项。</p>
</div>
<div class="section" id="open-file-cache-valid">
<h3>10.9.2.25. open_file_cache_valid<a class="headerlink" href="#open-file-cache-valid" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Syntax:     open_file_cache_valid time;
Default:
open_file_cache_valid 60s;
Context:    http, server, location
</pre></div>
</div>
<p>缓存项邮箱型检查的频率，默认是60s。</p>
</div>
</div>
<div class="section" id="ngx-http-access-module">
<h2>10.9.3. ngx_http_access_module<a class="headerlink" href="#ngx-http-access-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="allow">
<h3>10.9.3.1. allow<a class="headerlink" href="#allow" title="永久链接至标题">¶</a></h3>
<p>用法： allow address | CIDR | unix: | all;</p>
<p>用于允许特定主机访问</p>
</div>
<div class="section" id="deny">
<h3>10.9.3.2. deny<a class="headerlink" href="#deny" title="永久链接至标题">¶</a></h3>
<p>用法： deny address | CIDR | unix: | all;</p>
<p>用于禁止特定主机访问</p>
<div class="admonition attention">
<p class="first admonition-title">注意</p>
<p class="last">这里的allow、deny和apache中不一样，如果有一条匹配就返回对应结果。</p>
</div>
</div>
</div>
<div class="section" id="ngx-http-auth-basic-module">
<h2>10.9.4. ngx_http_auth_basic_module<a class="headerlink" href="#ngx-http-auth-basic-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="auth-basic">
<h3>10.9.4.1. auth_basic<a class="headerlink" href="#auth-basic" title="永久链接至标题">¶</a></h3>
<p>用法：auth_basic string | off;</p>
<p>提示认证的信息文本内容</p>
</div>
<div class="section" id="auth-basic-user-file">
<h3>10.9.4.2. auth_basic_user_file<a class="headerlink" href="#auth-basic-user-file" title="永久链接至标题">¶</a></h3>
<p>用法：auth_basic_user_file file;</p>
<p>认证的基本用户文件，口令文件使用htpasswd命令实现（在httpd-tools包里面提供）</p>
<p>样例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>location /admin/ {
auth_basic &quot;Admin Area&quot;;
auth_basic_user_file /etc/nginx/.ngxpasswd;
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="ngx-http-stub-status-module">
<h2>10.9.5. ngx_http_stub_status_module<a class="headerlink" href="#ngx-http-stub-status-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="id3">
<h3>10.9.5.1. auth_basic<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h3>
<p>提示输出nginx的基本状态信息。</p>
<p>样例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>location /status {
stub_status;
allow 172.16.0.0/16;
deny all;
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="ngx-http-log-module">
<h2>10.9.6. ngx_http_log_module<a class="headerlink" href="#ngx-http-log-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="log-format">
<h3>10.9.6.1. log_format<a class="headerlink" href="#log-format" title="永久链接至标题">¶</a></h3>
<p>用法：log_format name string …;</p>
<p>日志格式定义</p>
</div>
<div class="section" id="access-log">
<h3>10.9.6.2. access_log<a class="headerlink" href="#access-log" title="永久链接至标题">¶</a></h3>
<p>用法：access_log path [format [buffer=size] [gzip[=level]]
[flush=time] [if=condition]];</p>
<p>访问日志文件路径，格式和相关的缓冲区压缩等相关配置。</p>
<p>样例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>log_format compression &#39;$remote_addr-$remote_user [$time_local] &#39;
&#39;&quot;$request&quot; $status $bytes_sent &#39;
&#39;&quot;$http_referer&quot; &quot;$http_user_agent&quot; &quot;$gzip_ratio&quot;&#39;;
access_log /spool/logs/nginx-access.log compression buffer=32k;
</pre></div>
</div>
</div>
<div class="section" id="open-log-file-cache">
<h3>10.9.6.3. open_log_file_cache<a class="headerlink" href="#open-log-file-cache" title="永久链接至标题">¶</a></h3>
<p>用法 open_log_file_cache max=N [inactive=time]
[min_uses=N] [valid=time];</p>
<p>缓存各个日志文件的信息。</p>
</div>
</div>
<div class="section" id="ngx-http-gzip-module">
<h2>10.9.7. ngx_http_gzip_module<a class="headerlink" href="#ngx-http-gzip-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="id4">
<h3>10.9.7.1. log_format<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h3>
<p>用法：gzip on | off;</p>
<p>启用或者禁用gzip压缩</p>
</div>
<div class="section" id="gzip-comp-level">
<h3>10.9.7.2. gzip_comp_level<a class="headerlink" href="#gzip-comp-level" title="永久链接至标题">¶</a></h3>
<p>用法：gzip_comp_level level;</p>
<p>压缩比，默认是1</p>
</div>
<div class="section" id="gzip-disable">
<h3>10.9.7.3. gzip_disable<a class="headerlink" href="#gzip-disable" title="永久链接至标题">¶</a></h3>
<p>用法：gzip_disable regex …;</p>
<p>匹配到特定浏览器客户端不执行压缩功能。</p>
</div>
<div class="section" id="gzip-min-length">
<h3>10.9.7.4. gzip_min_length<a class="headerlink" href="#gzip-min-length" title="永久链接至标题">¶</a></h3>
<p>用法：gzip_min_length length;</p>
<p>启用压缩功能的响应报文的大小阈值，低于特定值就不压缩了。</p>
</div>
<div class="section" id="gzip-http-version">
<h3>10.9.7.5. gzip_http_version<a class="headerlink" href="#gzip-http-version" title="永久链接至标题">¶</a></h3>
<p>用法： gzip_http_version 1.0 | 1.1;</p>
<p>设定启用压缩功能时，协议的最小版本。</p>
</div>
<div class="section" id="gzip-buffers">
<h3>10.9.7.6. gzip_buffers<a class="headerlink" href="#gzip-buffers" title="永久链接至标题">¶</a></h3>
<p>用法：gzip_buffers number size;</p>
<p>支持实现压缩功能时缓冲区熟练及每个缓存区的大小。</p>
</div>
<div class="section" id="gzip-types">
<h3>10.9.7.7. gzip_types<a class="headerlink" href="#gzip-types" title="永久链接至标题">¶</a></h3>
<p>用法： gzip_types mime-type …;</p>
<p>那些资源进行压缩</p>
</div>
<div class="section" id="gzip-vary">
<h3>10.9.7.8. gzip_vary<a class="headerlink" href="#gzip-vary" title="永久链接至标题">¶</a></h3>
<p>用法：gzip_vary on | off;</p>
<p>如果启用了压缩，是否在响应报文首部插入“Vary: Accept-Encoding”</p>
</div>
<div class="section" id="gzip-proxied">
<h3>10.9.7.9. gzip_proxied<a class="headerlink" href="#gzip-proxied" title="永久链接至标题">¶</a></h3>
<p>用法：gzip_proxied off | expired | no-cache | no-store |
private | no_last_modified | no_etag | auth | any …;</p>
<p>充当代理服务器的时候， 对于后端服务器的响应报文何种条件下启动压缩功能。</p>
<p>样例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>gzip on;
gzip_comp_level 6;
gzip_min_length 64;
gzip_proxied any;
gzip_types text/xml text/css application/javascript;
</pre></div>
</div>
</div>
</div>
<div class="section" id="ngx-http-ssl-module">
<h2>10.9.8. ngx_http_ssl_module<a class="headerlink" href="#ngx-http-ssl-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="ssl">
<h3>10.9.8.1. ssl<a class="headerlink" href="#ssl" title="永久链接至标题">¶</a></h3>
<p>用法：ssl on | off;</p>
<p>是否启用ssl功能</p>
</div>
<div class="section" id="ssl-certificate">
<h3>10.9.8.2. ssl_certificate<a class="headerlink" href="#ssl-certificate" title="永久链接至标题">¶</a></h3>
<p>用法： ssl_certificate file;</p>
<p>ssl证书文件</p>
</div>
<div class="section" id="ssl-certificate-key">
<h3>10.9.8.3. ssl_certificate_key<a class="headerlink" href="#ssl-certificate-key" title="永久链接至标题">¶</a></h3>
<p>用法： ssl_certificate_key file;</p>
<p>证书私钥</p>
</div>
<div class="section" id="ssl-protocols">
<h3>10.9.8.4. ssl_protocols<a class="headerlink" href="#ssl-protocols" title="永久链接至标题">¶</a></h3>
<p>用法： ssl_protocols [SSLv2] [SSLv3] [TLSv1] [TLSv1.1]</p>
<p>支持ssl版本协议，默认为后面3个。</p>
</div>
<div class="section" id="ssl-session-cache">
<h3>10.9.8.5. ssl_session_cache<a class="headerlink" href="#ssl-session-cache" title="永久链接至标题">¶</a></h3>
<p>用法：ssl_session_cache off | none | [builtin[:size]] [shared:name:size];</p>
<p>ssl会话缓存</p>
</div>
<div class="section" id="ssl-session-timeout">
<h3>10.9.8.6. ssl_session_timeout<a class="headerlink" href="#ssl-session-timeout" title="永久链接至标题">¶</a></h3>
<p>用法： ssl_session_timeout time;</p>
<p>ssl会话超时</p>
<p>样例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>server {
listen 443 ssl;
server_name www.linuxpanda.com;
root /vhosts/ssl/htdocs;
ssl on;
ssl_certificate /etc/nginx/ssl/nginx.crt;
ssl_certificate_key /etc/nginx/ssl/nginx.key;
ssl_session_cache shared:sslcache:20m;
ssl_session_timeout 10m;
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="ngx-http-rewrite-module">
<h2>10.9.9. ngx_http_rewrite_module<a class="headerlink" href="#ngx-http-rewrite-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="rewrite">
<h3>10.9.9.1. rewrite<a class="headerlink" href="#rewrite" title="永久链接至标题">¶</a></h3>
<p>用法： rewrite regex replacement [flag]</p>
<p>将用户请求的URI基于regex所描述的模式进行检查，匹配到时将其替换为replacement指定的新的URI</p>
<dl class="docutils">
<dt>last</dt>
<dd>重写完成后停止对当前URI在当前location中后续的其它重写操作，而后对新的URI启动新一轮重写检查；提前重
启新一轮循环，不建议在location中使用</dd>
<dt>break</dt>
<dd>重写完成后停止对当前URI在当前location中后续的其它重写操作，而后直接跳转至重写规则配置块之后的其它
配置；结束循环，建议在location中使用。</dd>
<dt>redirect</dt>
<dd>临时重定向，重写完成后以临时重定向方式直接返回重写后生成的新URI给客户端，由客户端重新发起请求；
使用相对路径,或者http://或https://开头，状态码：302</dd>
<dt>permanent</dt>
<dd>重写完成后以永久重定向方式直接返回重写后生成的新URI给客户端，由客户端重新发起请求，状态码：301</dd>
</dl>
</div>
<div class="section" id="return">
<h3>10.9.9.2. return<a class="headerlink" href="#return" title="永久链接至标题">¶</a></h3>
<p>用法： return code [text]; 或者 return code [text]; 或者 return URL;</p>
<p>停止处理，并返回给客户端指定的响应码。</p>
</div>
<div class="section" id="rewrite-log">
<h3>10.9.9.3. rewrite_log<a class="headerlink" href="#rewrite-log" title="永久链接至标题">¶</a></h3>
<p>用法： rewrite_log on | off;</p>
<p>是否开启重写日志，发送到error_log</p>
</div>
<div class="section" id="set">
<h3>10.9.9.4. set<a class="headerlink" href="#set" title="永久链接至标题">¶</a></h3>
<p>用法： set $variable value;</p>
<p>设置自定义变量</p>
</div>
<div class="section" id="if">
<h3>10.9.9.5. if<a class="headerlink" href="#if" title="永久链接至标题">¶</a></h3>
<p>用法： if (condition) { … }</p>
<p>针对特定条件判定</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>比较操作符：
    = 相同
    != 不同
    ~：模式匹配，区分字符大小写
    ~*：模式匹配，不区分字符大小写
    !~：模式不匹配，区分字符大小写
    !~*：模式不匹配，不区分字符大小写

文件及目录存在性判断：
    -e, !-e 存在（包括文件，目录，软链接）
    -f, !-f 文件
    -d, !-d 目录
    -x, !-x 执行
</pre></div>
</div>
</div>
</div>
<div class="section" id="ngx-http-referer-module">
<h2>10.9.10. ngx_http_referer_module<a class="headerlink" href="#ngx-http-referer-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="valid-referers">
<h3>10.9.10.1. valid_referers<a class="headerlink" href="#valid-referers" title="永久链接至标题">¶</a></h3>
<p>用法：  valid_referers none|blocked|server_names|string …;</p>
<p>定义referer首部的合法可用值，不能匹配的将是非法值。</p>
<ul class="simple">
<li>node: 报文首部没有referer首部</li>
<li>blocked: 请求报文没有referer首部，但无有效值</li>
<li>server_names: 主机名或者主机名模式</li>
<li>arbitray_string:任意字符串，但可以使用*作为通配符</li>
<li>regular expression: 正则表达式模式匹配到的字符串，要使用~开头。</li>
</ul>
<p>样例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>valid_referers none block server_names *.linuxpanda.tech;
if ($invalid_referer) {
return 403 http://www.magedu.com;
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="ngx-http-proxy-module">
<h2>10.9.11. ngx_http_proxy_module<a class="headerlink" href="#ngx-http-proxy-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="proxy-pass">
<h3>10.9.11.1. proxy_pass<a class="headerlink" href="#proxy-pass" title="永久链接至标题">¶</a></h3>
<p>用法： proxy_pass URL;</p>
<p>代理的路径，样例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>server {
...
server_name HOSTNAME;
location /uri/ {
proxy_pass http://host[:port]; 最后没有/
}
...
}
</pre></div>
</div>
<p>使用此功能，可以动静分离， 将静态文件和动态文件分开调度。</p>
</div>
<div class="section" id="proxy-set-header">
<h3>10.9.11.2. proxy_set_header<a class="headerlink" href="#proxy-set-header" title="永久链接至标题">¶</a></h3>
<p>用法： proxy_set_header field value;</p>
<p>设定发往后端主机的请求报文的请求首部的值。</p>
</div>
<div class="section" id="proxy-cache-path">
<h3>10.9.11.3. proxy_cache_path<a class="headerlink" href="#proxy-cache-path" title="永久链接至标题">¶</a></h3>
<p>用法： proxy_cache_path;</p>
<p>用于定义可用于proxy功能的缓存</p>
</div>
<div class="section" id="proxy-cache">
<h3>10.9.11.4. proxy_cache<a class="headerlink" href="#proxy-cache" title="永久链接至标题">¶</a></h3>
<p>用法：proxy_cache zone | off; 默认off</p>
<p>指定调用的缓存，或关闭缓存机制</p>
</div>
<div class="section" id="proxy-cache-key">
<h3>10.9.11.5. proxy_cache_key<a class="headerlink" href="#proxy-cache-key" title="永久链接至标题">¶</a></h3>
<p>用法： proxy_cache_key string;</p>
<p>缓存中用于键的内容，默认：  proxy_cache_key $scheme$proxy_host$request_uri;</p>
</div>
<div class="section" id="proxy-cache-valid">
<h3>10.9.11.6. proxy_cache_valid<a class="headerlink" href="#proxy-cache-valid" title="永久链接至标题">¶</a></h3>
<p>用法： proxy_cache_valid [code …] time;</p>
<p>定义对特定响应码的响应内容的缓存时长</p>
<p>样例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>proxy_cache proxycache;
proxy_cache_key $request_uri;
proxy_cache_valid 200 302 301 1h;
proxy_cache_valid any 1m;
</pre></div>
</div>
</div>
<div class="section" id="proxy-cache-use-stale">
<h3>10.9.11.7. proxy_cache_use_stale;<a class="headerlink" href="#proxy-cache-use-stale" title="永久链接至标题">¶</a></h3>
<p>用法：proxy_cache_use_stale error | timeout | invalid_header | updating | http_500 | http_502 |
http_503 | http_504 | http_403 | http_404 | off …</p>
<p>在被代理的后端服务器出现哪种问题的情况下，可以直接使用过期的响应客户端。</p>
</div>
<div class="section" id="proxy-cache-method">
<h3>10.9.11.8. proxy_cache_method<a class="headerlink" href="#proxy-cache-method" title="永久链接至标题">¶</a></h3>
<p>用法：proxy_cache_methods GET | HEAD | POST …;</p>
<p>对那些客户端的请求方法对应的响应进行缓存，get和head方法总是被缓存的。</p>
</div>
<div class="section" id="proxy-hide-header">
<h3>10.9.11.9. proxy_hide_header<a class="headerlink" href="#proxy-hide-header" title="永久链接至标题">¶</a></h3>
<p>用法： proxy_hide_header field;</p>
<p>用于隐藏后端服务器的特定的响应首部</p>
</div>
<div class="section" id="proxy-connect-timeout">
<h3>10.9.11.10. proxy_connect_timeout<a class="headerlink" href="#proxy-connect-timeout" title="永久链接至标题">¶</a></h3>
<p>用法： proxy_connect_timeout time;</p>
<p>与后端服务器建立连接的超时时长，超过返回502错误。</p>
</div>
<div class="section" id="proxy-send-timeout">
<h3>10.9.11.11. proxy_send_timeout<a class="headerlink" href="#proxy-send-timeout" title="永久链接至标题">¶</a></h3>
<p>用法：proxy_send_timeout time</p>
<p>将请求发送给后端服务器的超时时长。</p>
</div>
<div class="section" id="proxy-read-timeout">
<h3>10.9.11.12. proxy_read_timeout<a class="headerlink" href="#proxy-read-timeout" title="永久链接至标题">¶</a></h3>
<p>用法： proxy_read_timeout time;</p>
<p>等待后端服务器发送响应报文的超时时长</p>
</div>
</div>
<div class="section" id="ngx-http-headers-module">
<h2>10.9.12. ngx_http_headers_module<a class="headerlink" href="#ngx-http-headers-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="id5">
<h3>10.9.12.1. set<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h3>
<p>用法： set $variable value;</p>
<p>设置自定义变量</p>
</div>
<div class="section" id="add-header">
<h3>10.9.12.2. add_header<a class="headerlink" href="#add-header" title="永久链接至标题">¶</a></h3>
<p>用法： add_header name value [always];</p>
<p>添加自定义头信息</p>
</div>
<div class="section" id="add-trailer">
<h3>10.9.12.3. add_trailer<a class="headerlink" href="#add-trailer" title="永久链接至标题">¶</a></h3>
<p>用法：add_trailer name value [always];</p>
<p>add_trailer添加自定义响应信息的尾部</p>
</div>
</div>
<div class="section" id="ngx-http-fastcgi-module">
<h2>10.9.13. ngx_http_fastcgi_module<a class="headerlink" href="#ngx-http-fastcgi-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="fastcgi-pass">
<h3>10.9.13.1. fastcgi_pass<a class="headerlink" href="#fastcgi-pass" title="永久链接至标题">¶</a></h3>
<p>用法： fastcgi_pass address;</p>
<p>后端的fastcgi服务器地址</p>
</div>
<div class="section" id="fastcgi-index">
<h3>10.9.13.2. fastcgi_index<a class="headerlink" href="#fastcgi-index" title="永久链接至标题">¶</a></h3>
<p>用法： fastcgi_index name;</p>
<p>fastcgi 默认主页资源</p>
</div>
<div class="section" id="fastcgi-param">
<h3>10.9.13.3. fastcgi_param<a class="headerlink" href="#fastcgi-param" title="永久链接至标题">¶</a></h3>
<p>用法： fastcgi_param parameter value [if_not_empty];</p>
<p>设置传递给 FastCGI服务器的参数值，可以是文本，变量或组合</p>
<p>样例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>location ~* \.php$ {
fastcgi_pass 后端fpm服务器IP:9000;
fastcgi_index index.php;
fastcgi_param SCRIPT_FILENAME
/usr/share/nginx/html$fastcgi_script_name;
include fastcgi_params;
…
}


location ~* ^/(pm_status|ping)$ {
include fastcgi_params;
fastcgi_pass 后端fpm服务器IP :9000;
fastcgi_param SCRIPT_FILENAME $fastcgi_script_name;
}
</pre></div>
</div>
</div>
<div class="section" id="fastcgi-cache-path">
<h3>10.9.13.4. fastcgi_cache_path<a class="headerlink" href="#fastcgi-cache-path" title="永久链接至标题">¶</a></h3>
<p>用法：fastcgi_cache_path path [levels=levels] [use_temp_path=on|off]
keys_zone=name:size [inactive=time] [max_size=size]
[manager_files=number] [manager_sleep=time] [manager_threshold=time]
[loader_files=number] [loader_sleep=time] [loader_threshold=time]
[purger=on|off] [purger_files=number] [purger_sleep=time]
[purger_threshold=time];</p>
<p>缓存路径。</p>
</div>
<div class="section" id="fastcgi-cache">
<h3>10.9.13.5. fastcgi_cache<a class="headerlink" href="#fastcgi-cache" title="永久链接至标题">¶</a></h3>
<p>用法： fastcgi_cache zone | off;</p>
<p>调用指定的缓存空间来缓存数据</p>
</div>
<div class="section" id="fastcgi-cache-key">
<h3>10.9.13.6. fastcgi_cache_key<a class="headerlink" href="#fastcgi-cache-key" title="永久链接至标题">¶</a></h3>
<p>用法： fastcgi_cache_key string;</p>
<p>定义用作缓存项的key的字符串</p>
</div>
<div class="section" id="fastcgi-cache-method">
<h3>10.9.13.7. fastcgi_cache_method<a class="headerlink" href="#fastcgi-cache-method" title="永久链接至标题">¶</a></h3>
<p>用法： fastcgi_cache_methods GET | HEAD | POST …;</p>
<p>为哪些请求方法使用缓存</p>
</div>
<div class="section" id="fastcgi-cache-min-uses">
<h3>10.9.13.8. fastcgi_cache_min_uses<a class="headerlink" href="#fastcgi-cache-min-uses" title="永久链接至标题">¶</a></h3>
<p>用法：fastcgi_cache_min_uses number;</p>
<p>缓存空间中的缓存项在inactive定义的非活动时间内至少要被访问到
此处所指定的次数方可被认作活动项</p>
</div>
<div class="section" id="fastcgi-keep-conn">
<h3>10.9.13.9. fastcgi_keep_conn<a class="headerlink" href="#fastcgi-keep-conn" title="永久链接至标题">¶</a></h3>
<p>用法： fastcgi_keep_conn on | off;</p>
<p>收到后端服务器响应后，fastcgi服务器是否关闭连接，建议启用长连接</p>
</div>
<div class="section" id="fastcgi-cache-valid">
<h3>10.9.13.10. fastcgi_cache_valid<a class="headerlink" href="#fastcgi-cache-valid" title="永久链接至标题">¶</a></h3>
<p>用法： fastcgi_cache_valid [code …] time;</p>
<p>不同的响应码各自的缓存时长</p>
<p>样例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>http {
    fastcgi_cache_path /var/cache/nginx/fcgi_cache
    levels=1:2:1 keys_zone=fcgicache:20m inactive=120s;
    ...
    server {
        location ~* \.php$ {
        ...
        fastcgi_cache fcgicache;
        fastcgi_cache_key $request_uri;
        fastcgi_cache_valid 200 302 10m;
        fastcgi_cache_valid 301 1h;
        fastcgi_cache_valid any 1m;
        ...
        }
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="ngx-http-upstream-module">
<h2>10.9.14. ngx_http_upstream_module<a class="headerlink" href="#ngx-http-upstream-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="upstream">
<h3>10.9.14.1. upstream<a class="headerlink" href="#upstream" title="永久链接至标题">¶</a></h3>
<p>用法： upstream name { … }</p>
<p>定义后端服务器组，会引入一个新的上下文。</p>
</div>
<div class="section" id="server">
<h3>10.9.14.2. server<a class="headerlink" href="#server" title="永久链接至标题">¶</a></h3>
<p>用法： server address [parameters];</p>
<p>定义后端服务器成员，weight定义权重，max_conn最大连接数量，max_fails失败尝试最大次数
faile_timeout后端标记不可用状态的时长，backup备用，down不可用。</p>
</div>
<div class="section" id="ip-hash">
<h3>10.9.14.3. ip_hash<a class="headerlink" href="#ip-hash" title="永久链接至标题">¶</a></h3>
<p>用法： ip_hash</p>
<p>源地址hash调度算法</p>
</div>
<div class="section" id="least-conn">
<h3>10.9.14.4. least_conn<a class="headerlink" href="#least-conn" title="永久链接至标题">¶</a></h3>
<p>用法： least_conn</p>
<p>最小连接调度算法</p>
</div>
<div class="section" id="hash-key">
<h3>10.9.14.5. hash key<a class="headerlink" href="#hash-key" title="永久链接至标题">¶</a></h3>
<p>用法：hash key [consistent]</p>
<p>基于特定的key的hash表来实现对请求的调度。</p>
</div>
<div class="section" id="keepalive">
<h3>10.9.14.6. keepalive<a class="headerlink" href="#keepalive" title="永久链接至标题">¶</a></h3>
<p>用法：keepalive 连接数N</p>
<p>为每个worker进程保留的空闲的长连接数量。</p>
</div>
<div class="section" id="health-check">
<h3>10.9.14.7. health_check<a class="headerlink" href="#health-check" title="永久链接至标题">¶</a></h3>
<p>用法： health_check [parameters];</p>
<p>健康性检查，interval检查频率，fails失败次数，passes判定成功次数，uri测试目标，match指定的match配置块。</p>
</div>
<div class="section" id="match">
<h3>10.9.14.8. match<a class="headerlink" href="#match" title="永久链接至标题">¶</a></h3>
<p>用法： match name { … }</p>
<p>对后端的服务器做健康检查时候，定义其结果判断机制，只能用于http上下文。</p>
</div>
<div class="section" id="id6">
<h3>10.9.14.9. fastcgi_cache_valid<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h3>
<p>用法： fastcgi_cache_valid [code …] time;</p>
<p>不同的响应码各自的缓存时长</p>
</div>
</div>
<div class="section" id="ngx-stream-core-module">
<h2>10.9.15. ngx_stream_core_module<a class="headerlink" href="#ngx-stream-core-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="stream">
<h3>10.9.15.1. stream<a class="headerlink" href="#stream" title="永久链接至标题">¶</a></h3>
<p>用法： stream { … }</p>
<p>不同的响应码各自的缓存时长</p>
<p>样例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>stream {
    upstream mysqlsrvs {
    server 192.168.22.2:3306;
    server 192.168.22.3:3306;
    least_conn;
    }
    server {
    listen 10.1.0.6:3306;
    proxy_pass mysqlsrvs;
    }
}
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h3>10.9.15.2. listen<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h3>
<p>用法： listen address:port [ssl] [udp] [proxy_protocol]
[backlog=number] [bind] [ipv6only=on|off] [reuseport]
[so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];</p>
<p>定义监听信息</p>
</div>
</div>
<div class="section" id="ngx-stream-proxy-module">
<h2>10.9.16. ngx_stream_proxy_module<a class="headerlink" href="#ngx-stream-proxy-module" title="永久链接至标题">¶</a></h2>
<div class="section" id="id8">
<h3>10.9.16.1. proxy_pass<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h3>
<p>用法：proxy_pass address;</p>
<p>指定后端服务器地址</p>
</div>
<div class="section" id="proxy-timeout">
<h3>10.9.16.2. proxy_timeout<a class="headerlink" href="#proxy-timeout" title="永久链接至标题">¶</a></h3>
<p>用法：proxy_timeout timeout;</p>
<p>无数据传输时候，保存连接状态的超时时长</p>
</div>
<div class="section" id="porxy-connect-timeout">
<h3>10.9.16.3. porxy_connect_timeout<a class="headerlink" href="#porxy-connect-timeout" title="永久链接至标题">¶</a></h3>
<p>用法：proxy_connect_timeout time;</p>
<p>设置nginx与被代理的服务器尝试建立连接的超时时长默认为60s</p>
<p>样例配置</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>stream {

    upstream mysqlsrvs {
    server 192.168.0.10:3306;
    server 192.168.0.11:3306;
    hash $remote_addr consistent;
    }

    server {
    listen 172.16.100.100:3306;
    proxy_pass mysqlsrvs;
    proxy_timeout 60s;
    proxy_connect_timeout 10s;
    }
}
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="03-nginx虚拟主机三种实现方式.html" class="btn btn-neutral float-right" title="10.10. nginx虚拟主机三种实现方式" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="01-nginx安装.html" class="btn btn-neutral" title="10.8. nginx安装" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, 张志佳.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../',
            VERSION:'1.0',
            LANGUAGE:'zh_CN',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../../../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>