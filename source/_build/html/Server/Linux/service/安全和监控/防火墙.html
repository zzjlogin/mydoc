

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.2. 防火墙 &mdash; 张志佳的技术文档 1.0 文档</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../../search.html" />
    <link rel="next" title="5.3. selinux" href="selinux.html" />
    <link rel="prev" title="5.1. aide" href="aide.html" /> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> 张志佳的技术文档
          

          
            
            <img src="../../../../_static/logo-wordmark-light.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2018-09-05
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../Language.html">编程语言学习</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../Language/Python.html">Python学习</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../Language/Python/index.html">Python基础</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/01环境准备.html">1. 环境准备</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/02内建函数.html">2. 内建函数</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/03内置常量.html">3. 内置常量</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/04内置类型.html">4. 内置类型</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/05内置异常.html">5. 内置异常</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/06文本处理.html">6. 文本处理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/07二进制处理.html">7. 二进制处理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/08数据类型.html">8. 数据类型</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/09数值模块.html">9. 数值模块</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/10函数式编程模块.html">10. 函数式编程模块</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/11文件和目录访问.html">11. 文件和目录访问</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/12数据持久化.html">12. 数据持久化</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/13数据压缩和归档.html">13. 数据压缩和归档</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/14文件格式.html">14. 文件格式</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/15加密服务.html">15. 加密服务</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/16通用操作系统服务.html">16. 通用操作系统服务</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/17并发执行.html">17. 并发执行</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/18进程通信和网络.html">18. 进程通信和网络</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/19网络数据处理.html">19. 网络数据处理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Python/base/20结构化文本文档处理工具.html">20. 结构化文本文档处理工具</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../Language/Python/index.html#python-libs">Python常用第三方库</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../Language/Algorithm.html">算法学习(Algorithm)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../Language/Algorithm/index.html">树(tree)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Algorithm/tree/indroduction.html">树(tree)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../Language/Algorithm/index.html#ccf">CCF考试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Algorithm/ccf/201703-1.html">2017031-分蛋糕</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Algorithm/ccf/201703-2.html">2017032-学生排队</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Algorithm/ccf/201712-4.html">2017124-行车路线</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Algorithm/ccf/201803-1.html">2018031-跳一跳</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../Language/Shell.html">Shell 编程</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../Language/Shell/1.base.html">1. Shell编程基础</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Shell/1.base.html#shell-about">1.1. Shell编程简介</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Shell/1.base.html#shell-demo">1.2. 入门样例</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Shell/1.base.html#shell-stander">1.3. Shell规范</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Shell/1.base.html#shell-cmd">1.4. Shell基础语句</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../Language/Shell/1.base.html#id21">1.5. Shell調試</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../Language/Shell/2.advance.html">2. Shell编程高级用法</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../Network.html">计算机网络学习</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../Network/1.NetworkTheory.html">理论学习</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../Network/2.HuaWei.html">华为</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../Network/3.H3C.html">H3C(华三/新华三)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../Network/4.CISCO.html">思科(CISCO)</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../Server.html">服务器相关学习</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../1.AboutAndClass.html">服务器相关常识</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../2.Linux.html">Linux 服务器</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../1.cmd.html">Linux命令汇总</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/Ctrl+d.html">1. Ctrl+d</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/alias.html">2. alias</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/basename.html">3. basename</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/bc.html">4. bc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/bg.html">5. bg</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/cal.html">6. cal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/cat.html">7. cat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/cd.html">8. cd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/chage.html">9. chage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/chattr.html">10. chattr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/chgrp.html">11. chgrp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/chkconfig.html">12. chkconfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/chmod.html">13. chmod</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/chown.html">14. chown</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/clear.html">15. clear</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/cp.html">16. cp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/crontab.html">17. crontab</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/cut.html">18. cut</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/date.html">19. date</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/dd.html">20. dd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/df.html">21. df</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/diff.html">22. diff</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/dig.html">23. dig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/dirname.html">24. dirname</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/dmesg.html">25. dmesg</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/dos2unix.html">26. dos2unix</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/du.html">27. du</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/dump.html">28. dump</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/dumpe2fs.html">29. dumpe2fs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/e2fsck.html">30. e2fsck</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/echo.html">31. echo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/eject.html">32. eject</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/exec.html">33. exec</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/exit.html">34. exit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/export.html">35. export</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/fdisk.html">36. fdisk</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/fg.html">37. fg</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/file.html">38. file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/find.html">39. find</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/finger.html">40. finger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/free.html">41. free</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/fsck.html">42. fsck</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/grep.html">43. grep</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/groupadd.html">44. groupadd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/gzip.html">45. gzip</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/halt.html">46. halt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/head.html">47. head</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/history.html">48. history</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/host.html">49. host</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/hostname.html">50. hostname</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/iconv.html">51. iconv</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/id.html">52. id</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/ifconfig.html">53. ifconfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/ifdown.html">54. ifdown</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/ifup.html">55. ifup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/init.html">56. init</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/iostat.html">57. iostat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/ipcrm.html">58. ipcrm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/ipcs.html">59. ipcs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/jobs.html">60. jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/join.html">61. join</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/kill.html">62. kill</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/killall.html">63. killall</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/last.html">64. last</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/lastlog.html">65. lastlog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/less.html">66. less</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/locate.html">67. locate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/logout.html">68. logout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/ls.html">69. ls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/lsattr.html">70. lsattr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/lsof.html">71. lsof</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/ltrace.html">72. ltrace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/mail.html">73. mail</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/md5sum.html">74. md5sum</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/mkdir.html">75. mkdir</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/mkfs.html">76. mkfs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/mkswap.html">77. mkswap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/more.html">78. more</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/mount.html">79. mount</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/mpstat.html">80. mpstat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/mutt.html">81. mutt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/mv.html">82. mv</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/nc.html">83. nc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/netstat.html">84. netstat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/nice.html">85. nice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/nmap.html">86. nmap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/nohup.html">87. nohup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/nslookup.html">88. nslookup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/parted.html">89. parted</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/partprobe.html">90. partprobe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/passwd.html">91. passwd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/paste.html">92. paste</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/pgrep.html">93. pgrep</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/ping.html">94. ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/pkill.html">95. pkill</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/poweroff.html">96. poweroff</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/printf.html">97. printf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/ps.html">98. ps</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/pstree.html">99. pstree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/pwd.html">100. pwd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/rename.html">101. rename</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/resize2fs.html">102. resize2fs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/rev.html">103. rev</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/rm.html">104. rm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/rmdir.html">105. rmdir</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/route.html">106. route</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/rpm.html">107. rpm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/runlevel.html">108. runlevel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/sar.html">109. sar</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/scp.html">110. scp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/service.html">111. service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/shutdown.html">112. shutdown</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/sort.html">113. sort</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/split.html">114. split</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/ss.html">115. ss</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/ssh.html">116. ssh</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/stat.html">117. stat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/strace.html">118. strace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/su.html">119. su</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/sudo.html">120. sudo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/swapoff.html">121. swapoff</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/swapon.html">122. swapon</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/sync.html">123. sync</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/tac.html">124. tac</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/tail.html">125. tail</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/tar.html">126. tar</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/tcpdump.html">127. tcpdump</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/telnet.html">128. telnet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/time.html">129. time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/top.html">130. top</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/touch.html">131. touch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/tr.html">132. tr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/traceroute.html">133. traceroute</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/tree.html">134. tree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/type.html">135. type</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/umask.html">136. umask</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/umount.html">137. umount</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/unalias.html">138. unalias</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/uname.html">139. uname</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/uniq.html">140. uniq</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/unset.html">141. unset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/unzip.html">142. unzip</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/uptime.html">143. uptime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/useradd.html">144. useradd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/userdel.html">145. userdel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/usermod.html">146. usermod</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/users.html">147. users</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/vi.html">148. vi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/vimdiff.html">149. vimdiff</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/visudo.html">150. visudo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/vmstat.html">151. vmstat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/w.html">152. w</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/watch.html">153. watch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/wc.html">154. wc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/wget.html">155. wget</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/whereis.html">156. whereis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/which.html">157. which</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/who.html">158. who</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/whoami.html">159. whoami</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/xargs.html">160. xargs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/yum.html">161. yum</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cmd/zip.html">162. xxxx</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../2.base.html">Linux基础</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../base/01-Linux简介.html">1. Linux 简介</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/02-Linux入门.html">2. 计算机简述</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/03-文件系统.html">3. Linux文件系统</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/04-Bash特性.html">4. bash的基础特性</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/05-linux用户组管理.html">5. linux用户和组管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/07-grep正则表达式.html">6. grep正则表达式</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/08-Linux文件查找.html">7. Linux文件查找</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/09-Vim编辑器.html">8. Vim编辑器</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/10-Linux磁盘管理.html">9. Linux磁盘管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/11-Linux文件权限.html">10. Linux文件权限</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/12-RAID.html">11. RAID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/13-LVM.html">12. LVM逻辑卷 </a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/14-Btrfs文件系统.html">13. Btrfs文件系统</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/15-解压缩.html">14. 解压缩</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/16-Linux程序包管理.html">15. Linux程序包管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/16-Linux系统程序包管理.html">16. Linux系统程序包管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/17-Linux系统网络属性管理.html">17. Linux系统网络属性管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/17-Linux系统网络管理.html">18. Linux系统网络管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/18-Linux进程管理.html">19. Linux进程管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/19-Linux任务计划.html">20. Linux任务计划</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/20-CentOS启动流程与Grub.html">21. CentOS启动流程与Grub</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/21-Linux Kernel.html">22. Linux Kernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/22-文本处理工具之sed,awk.html">23. 文本处理工具之sed,awk</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/23-Openssl.html">24. Openssl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/24-Nssitch、pam.html">25. Nssitch、pam</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/25-文件共享服务.html">26. 文件共享服务</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/26-DNS域名解析服务.html">27. DNS域名解析服务</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/27-Linux系统防火墙.html">28. Linux系统防火墙</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/28-LinuxSyslog系统日志管理.html">29. Linux Syslog系统日志管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../base/29-WebServices.html">30. Web Service</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="../../3.service.html">Linux服务器</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../DHCP/index.html">1. dhcp服务</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Rsync同步/index.html">2. Rsync同步</a></li>
<li class="toctree-l4"><a class="reference internal" href="../自动化安装/index.html">3. 自动化安装</a></li>
<li class="toctree-l4"><a class="reference internal" href="../自动化运维/index.html">4. 自动化运维</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">5. 安全和监控</a></li>
<li class="toctree-l4"><a class="reference internal" href="../远程登陆/index.html">6. 远程登陆</a></li>
<li class="toctree-l4"><a class="reference internal" href="../认证/index.html">7. 认证</a></li>
<li class="toctree-l4"><a class="reference internal" href="../DNS/index.html">8. DNS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../数据库/index.html">9. 数据库</a></li>
<li class="toctree-l4"><a class="reference internal" href="../WEB/index.html">10. WEB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../日志管理/index.html">11. 日志管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../网络文件共享/index.html">12. 网络文件共享</a></li>
<li class="toctree-l4"><a class="reference internal" href="../版本控制/index.html">13. 版本控制</a></li>
<li class="toctree-l4"><a class="reference internal" href="../集群/index.html">14. 集群</a></li>
<li class="toctree-l4"><a class="reference internal" href="../容器/index.html">15. 容器</a></li>
<li class="toctree-l4"><a class="reference internal" href="../虚拟化/index.html">16. 虚拟化</a></li>
<li class="toctree-l4"><a class="reference internal" href="../杂项/index.html">17. 杂项</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../3.Unix.html">Unix 和类Unix</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../4.Windows.html">Windows 服务器</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../5.Optimization.html">服务器优化</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../6.FAQ.html">常见问题及解决(FAQ)</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../Data.html">数据相关/大数据</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../Data/index.html">数据相关/大数据</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../MachineLearning.html">机器学习</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../MachineLearning/index.html">机器学习入门</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ToolsOpenSource.html">工具和开源项目</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../ToolsOpenSource/1.Tools.html">常用工具汇总</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../ToolsOpenSource/Tools/index.html">用reStructuredText实践</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../ToolsOpenSource/Tools/rST/1.index.html">1. reST简介</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../ToolsOpenSource/Tools/rST/2.install.html">2. reST安装及环境配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../ToolsOpenSource/Tools/rST/3.grammar.html">3. reST语法学习</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../ToolsOpenSource/Tools/rST/4.toOthers.html">4. 格式转换</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../ToolsOpenSource/Tools/rST/5.API.html">5. 文档API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../ToolsOpenSource/Tools/rST/6.rstTools.html">6. reST工具</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../ToolsOpenSource/Tools/rST/7.addFunctions.html">7. 其他</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../ToolsOpenSource/Tools/index.html#markdown">用MarkDown实践</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../ToolsOpenSource/Tools/MarkDown/MarkDownTools.html">1. MarkDown常用工具</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ToolsOpenSource/2.OpenSource.html">关注的开源项目</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../Others.html">其他杂项</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../Others/index.html">电脑疑难杂症</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../log.html">更新日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../AboutMe.html">关于我</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">张志佳的技术文档</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../../Server.html">服务器相关学习</a> &raquo;</li>
        
          <li><a href="../../../2.Linux.html">Linux 服务器</a> &raquo;</li>
        
          <li><a href="../../3.service.html">Linux服务器</a> &raquo;</li>
        
          <li><a href="../index.html">&lt;no title&gt;</a> &raquo;</li>
        
          <li><a href="index.html">5. 安全和监控</a> &raquo;</li>
        
      <li>5.2. 防火墙</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="selinux.html" class="btn btn-neutral float-right" title="5.3. selinux" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="aide.html" class="btn btn-neutral" title="5.1. aide" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>5.2. 防火墙<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<div class="section" id="iptables">
<h2>5.2.1. iptables的使用<a class="headerlink" href="#iptables" title="永久链接至标题">¶</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>链操作：
    -N: new,创建新的链
    -X: delete,删除一个链
    -F: flush,清空一个链
    -P: policy,策略
    -E: rename,重名

规则操作：
    -A: append,追加一条规则
    -I: insert,插入一天规则
    -D: delete, 删除一条规则
    -R: replace,替换一条规则
    -Z: zero,清空计数器

匹配规则：
    基本匹配：
        -s: src,匹配源地址
        -d: dst,匹配目标地址
        -i: 指定数据包的流入接口
        -o: 指定数据的流出接口

    扩展匹配：
        tcp:
            -p: protocol,指定协议
            --sports： 源端口
            --dports:  目标端口
            --tcp-flags: 标记
            --sync:     只允许新连接
        udp:
            --sports： 源端口
            --dports:  目标端口
        icmp:
            --icmp-type: 8ping出去，0代表进入

    显式扩展：
        -m state：
            NEW: 新连接
            ESTABLISHED:对一个权限的请求进行回应
            RELATED: 两个完整连接之间的相互关系
            INVALID: 无法识别的状态连接
            UNTRACKED: 未追踪的连接

        -m multiport:
            --sports: 22,80,443 指定多个端口
            --dports: 指定多个端口
            --ports： 指定端口，不限定是入和出的端口

        -m iprange:
            --src-range: 源地址范围
            --dst-range: 目标地址范围

        -m connlimit:
            --connlimit-upto n: 限定并发连接数的上限
            --connlimit-above n: 限定并发连接数的下限

        -m limit:
            --limit: 限制速率
            --limit-burst: 突发速率限定

        -m string:
            --algo bm|kmp: 指定算法
            ! --string pattern : 给定要检查的字符串模式

        -m time:
            --datestart YYYY[-MM-DD][Thh:mm:ss]: 起始日期时间
            --datestop YYYY[-MM-DD][Thh:mm:ss]: 结束日期时间
            --timestart hh:mm:ss 起始时间
            --timestop   hh:mm:ss 结束时间
            ! --monthdays： 匹配一个月中的那些天
            ! --weekdays: 匹配一周中的那些天

处理动作：
    --j TARGET 其中TARGET有下面几个值
    ACCEPT  接受
    DROP    丢弃
    REJECT  拒绝
    SNAT    源地址转化
    DNAT    目标地址转换
    REDIRECT 重定向
    LOG  日志
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h2>5.2.2. 样例<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>查看所有链</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1">#</span>
<span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1">#  iptables -nL --line-number</span>
</pre></div>
</div>
<p>查看特定表</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1"># iptables -nL -t nat</span>
</pre></div>
</div>
<p>修改默认规则</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1"># iptables -t filter -P FORWARD DROP</span>
</pre></div>
</div>
<p>放行特定ip特定端口访问</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1"># iptables -A INPUT -s 0/0 -d 192.168.46.1 -p tcp --dport 21 -j ACCEPT</span>
<span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1"># iptables -A OUTPUT -s 192.168.46.1 -d 0/0 -p tcp --sport 21 -j ACCEPT</span>
</pre></div>
</div>
<p>只能本机ping别人，限制别人ping</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1"># iptables -A OUTPUT -p icmp --icmp-type 8 -s 192.168.168.150 -j ACCEPT</span>
<span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1"># iptables -A INPUT -p icmp --icmp-type 0 -s 0/0 -j ACCEPT</span>
</pre></div>
</div>
<p>禁止访问包含有“old”字符的页面</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1"># iptables -I OUTPUT  -s 192.168.46.7 -d 0/0  -p tcp --sport 80  -m string --algo kmp --string &quot;old&quot;   -j DROP</span>
</pre></div>
</div>
<p>时间限定</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1"># iptables -A INPUT -d 192.168.46.7 -p tcp --dport 23 -m iprange --src-range 172.18.46.1-172.18.46.100 \</span>
-m <span class="nb">time</span> --timestart <span class="m">09</span>:00:00 --timestop <span class="m">18</span>:00:00 --weekdays <span class="m">1</span>,2,3,4,5 -j ACCEPT
</pre></div>
</div>
<p>允许23端口同一个客户端小于3个并发连接</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1"># iptables -A INPUT -s 0/0 -d 192.168.46.7 -p tcp --dport 23 -m connlimit ! --connlimit-above 3 -j ACCEPT</span>
</pre></div>
</div>
<p>允许22，23，80端口访问</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1"># iptables -A INPUT -s 192.168.46.0/24 -d 192.168.46.7 -p tcp -m multiport --dports 22,23,80 \</span>
 -m state --state NEW,ESTABLISHED -j ACCEPT
</pre></div>
</div>
<p>允许ftp访问</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1"># modprobe  nf_conntrack_ftp</span>
<span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1"># iptables -A INPUT -d 192.168.46.7 -p tcp -m state --state RELATED,ESTABLISHED -j ACCEPT</span>
</pre></div>
</div>
<p>每个访问规则添加日志记录</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos-150 ~<span class="o">]</span><span class="c1"># iptables -I FORWARD 2 -s 10.0.0.0/24 -p tcp -m multiport --dports 80,21,22,23 \</span>
-m state --state NEW -j LOG --log-prefix <span class="s2">&quot;new conn:&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h2>5.2.3. 防火墙案例<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<div class="section" id="snat">
<h3>5.2.3.1. SNAT案例<a class="headerlink" href="#snat" title="永久链接至标题">¶</a></h3>
<p>要求如下：</p>
<ol class="arabic simple">
<li>时间控制: 在1，3，5上午09：00到12：00 ,下午2：00到16：00不能访问，其他时间都可以访问</li>
<li>网址限制: 限制huya.com视频播放和douyu.com视频播放</li>
<li>特例控制: 对于192.168.46.1-192.168.46.4 这些ip不能有任何限制</li>
<li>snat服务： 要给局域网内部的机器提供nat功能。</li>
</ol>
<p>详细部署图：</p>
<img alt="images/secure/snat.png" src="images/secure/snat.png" />
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 各个主机的网关配置为防火墙的网关为192.168.46.151。</span>
<span class="c1"># 启动防火墙的路由功能</span>
<span class="o">[</span>root@centos-151 ~<span class="o">]</span><span class="c1"># echo net.ipv4.ip_forward=1 &gt;&gt; /etc/sysctl.conf</span>
<span class="o">[</span>root@centos-151 ~<span class="o">]</span><span class="c1"># sysctl  -p</span>
<span class="o">[</span>root@centos-151 ~<span class="o">]</span><span class="c1"># cat /proc/sys/net/ipv4/ip_forward</span>
<span class="m">1</span>
<span class="c1"># 给局域网主机启用snat服务,这里不要质疑我的为何外网ip是172的。 我这个请求还要被172.18.0.1这个防火墙snat的。</span>

<span class="o">[</span>root@centos-151 ~<span class="o">]</span><span class="c1"># iptables -S</span>
-P INPUT ACCEPT
-P FORWARD ACCEPT
-P OUTPUT ACCEPT
-A FORWARD -m iprange --src-range <span class="m">192</span>.168.46.1-192.168.46.4 -j ACCEPT
-A FORWARD -s <span class="m">192</span>.168.46.0/24 -m string --string <span class="s2">&quot;huya.com&quot;</span> --algo bm --to <span class="m">65535</span> -j REJECT --reject-with icmp-port-unreachable
-A FORWARD -s <span class="m">192</span>.168.46.0/24 -m string --string <span class="s2">&quot;douyu.com&quot;</span> --algo bm --to <span class="m">65535</span> -j REJECT --reject-with icmp-port-unreachable
-A FORWARD -m <span class="nb">time</span> --timestart <span class="m">01</span>:00:00 --timestop <span class="m">04</span>:00:00 --weekdays Mon,Wed,Fri --datestop <span class="m">2038</span>-01-19T03:14:07 -j ACCEPT
-A FORWARD -m <span class="nb">time</span> --timestart <span class="m">06</span>:00:00 --timestop <span class="m">10</span>:00:00 --weekdays Mon,Wed,Fri --datestop <span class="m">2038</span>-01-19T03:14:07 -j ACCEPT
-A FORWARD -s <span class="m">192</span>.168.46.0/24 -j REJECT --reject-with icmp-port-unreachable
</pre></div>
</div>
</div>
<div class="section" id="dnat">
<h3>5.2.3.2. DNAT案例<a class="headerlink" href="#dnat" title="永久链接至标题">¶</a></h3>
</div>
</div>
<div class="section" id="firewalld-cmd">
<h2>5.2.4. firewalld-cmd的使用<a class="headerlink" href="#firewalld-cmd" title="永久链接至标题">¶</a></h2>
<p>firewalld是centos7新推出的管理netfilter的工具。</p>
<div class="section" id="id4">
<h3>5.2.4.1. firewalld-cmd基本的使用<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h3>
<div class="highlight-test notranslate"><div class="highlight"><pre><span></span># 查看预定义的服务列表
[root@centos-151 ~]# firewall-cmd --get-default-zone
FirewallD is not running
[root@centos-151 ~]# systemctl start firewalld
[root@centos-151 ~]# firewall-cmd --get-default-zone
public

# 查看预定义的服务配置项
[root@centos-151 ~]# cat /usr/lib/firewalld/services/http.xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;service&gt;
&lt;short&gt;WWW (HTTP)&lt;/short&gt;
&lt;description&gt;HTTP is the protocol used to serve Web pages. If you plan to make your Web server publicly available, enable this option. This option is not required for viewing pages locally or developing Web pages.&lt;/description&gt;
&lt;port protocol=&quot;tcp&quot; port=&quot;80&quot;/&gt;
&lt;/service&gt;

# 列出所有的可用区域
[root@centos-151 ~]# firewall-cmd --get-zones
block dmz drop external home internal public trusted work

# 查询默认的区域
[root@centos-151 ~]# firewall-cmd --get-default-zone
public

# 设置默认区域
[root@centos-151 ~]# firewall-cmd --set-default-zone=dmz
success

# 列出正在使用的区域
[root@centos-151 ~]# firewall-cmd --get-active-zones
dmz
interfaces: ens33 ens37
# 添加源地址的浏览到特定区域
[root@centos-151 ~]# firewall-cmd --add-source=192.168.46.1 --zone public
success

# 移除特定源地址的流量
[root@centos-151 ~]# firewall-cmd --remove-source=192.168.46.1 --zone public
success

# 添加来自于特定接口的流量到特定区域
[root@centos-151 ~]# firewall-cmd --add-interface=ens33 --zone=dmz
The interface is under control of NetworkManager, setting zone to &#39;dmz&#39;.
success

# 改变指定接口到新区域
[root@centos-151 ~]# firewall-cmd --change-interface=ens33 --zone=public
The interface is under control of NetworkManager, setting zone to &#39;public&#39;.
success

# 允许服务流量通过
[root@centos-151 ~]# firewall-cmd --add-service=http
success


# 允许特定端口和协议的流量
[root@centos-151 ~]# firewall-cmd --add-port=8080/tcp
success
# 移除特定服务
[root@centos-151 ~]# firewall-cmd --remove-service=http
success

# 移除特定端口
[root@centos-151 ~]# firewall-cmd --remove-port=8080/tcp
success

# 重新加载配置项
[root@centos-151 ~]# firewall-cmd --reload
success

# 查看开放的服务
[root@centos-151 ~]# firewall-cmd --list-services
ssh

# 查看开放的端口
[root@centos-151 ~]# firewall-cmd --list-ports

# 列出指定区域的所有配置信息

[root@centos-151 ~]# firewall-cmd --list-all
dmz (active)
target: default
icmp-block-inversion: no
interfaces: ens37
sources:
services: ssh
ports:
protocols:
masquerade: no
forward-ports:
source-ports:
icmp-blocks:
rich rules:
</pre></div>
</div>
</div>
<div class="section" id="firewalld-cmd-rich">
<h3>5.2.4.2. firewalld-cmd rich规则的使用<a class="headerlink" href="#firewalld-cmd-rich" title="永久链接至标题">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># 获取rich规则的帮助
[root@centos-151 ~]# man 5 firewalld.richlanguage
[root@centos-151 ~]# firewall-cmd --permanent --zone=work --add-rich-rule=&#39;rule family=ipv4 source address=192.168.0.11/32 reject &#39;
success

# 拒绝从192.168.0.11的所有流量
[root@centos-151 ~]# firewall-cmd --permanent --zone=work --add-rich-rule=&#39;rule family=ipv4 source address=192.168.0.11/32 reject &#39;
success

# 限制每分钟只有2个连接到ftp服务
[root@centos-151 ~]# firewall-cmd --permanent --zone=work --add-rich-rule=&#39;rule service name=&quot;ftp&quot; limit value=2/m accept &#39;
success

# 抛弃esp协议的所有数据包
[root@centos-151 ~]# firewall-cmd --permanent --add-rich-rule=&#39;rule protocol value=esp drop&#39;
success

# 接受所有192.168.1.0/24子网端口范围7900-7905的tcp流量



# 接受ssh新连接，记录日志到syslogde notice级别，每分钟最多接受3条信息
[root@centos-151 ~]# firewall-cmd --permanent --zone=work --add-rich-rule=&#39;rule service name=&quot;ssh&quot;  log prefix=&quot;ssh &quot; level=&quot;notice&quot; limit value=&quot;3/m&quot; accept &#39;
success

# 从192.168.45.0/24子网的dns连接在5分钟内被拒绝， 并记录日志到audit，每小时最大记录一条信息。
[root@centos-151 ~]# firewall-cmd --add-rich-rule=&#39;rule family=ipv4 source address=&quot;192.168.45.0/24&quot; service name=&quot;dns&quot; audit limit value=&quot;1/h&quot; reject &#39;
success

# 检查是否允许伪装，并开启伪装
[root@centos-151 ~]# firewall-cmd --query-masquerade
no
[root@centos-151 ~]# firewall-cmd --add-masquerade
success
[root@centos-151 ~]# firewall-cmd --query-masquerade
yes

# 为内网提供snat 功能
[root@centos-151 ~]# firewall-cmd --add-rich-rule=&#39;rule family=ipv4 source address=&quot;192.168.0.0/24&quot;  masquerade &#39;
success

# 转发传入连接9527/tcp到防火墙的80/tcp到public zone 的192.168.0.254去

[root@centos-151 ~]# firewall-cmd --permanent --zone=public --add-forward-port=port=9527:proto=tcp:toport=80:toadd=192.168.0.254
success
</pre></div>
</div>
</div>
</div>
<div class="section" id="id5">
<h2>5.2.5. 更多练习<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h2>
<p><a class="reference external" href="http://linux.linuxpanda.tech/%E7%BB%83%E4%B9%A0%E9%A2%98/2018-02-03-%E7%BB%83%E4%B9%A0%E7%BD%91%E7%BB%9C%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB2.html#fileshare">iptalbes练习</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="selinux.html" class="btn btn-neutral float-right" title="5.3. selinux" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="aide.html" class="btn btn-neutral" title="5.1. aide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, 张志佳.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'1.0',
            LANGUAGE:'zh_CN',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>