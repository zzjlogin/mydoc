.. _python.pandas.viewdata:

======================================================================================================================================================
pandas数据对象中存储的数据的查看
======================================================================================================================================================


:Date: 2019-3

.. contents::


数据对象默认显示
======================================================================================================================================================

.. tip::
    - pandas在命令行界面查看数据，对齐问题是列名或者数据中有中文。
    - 设置pandas的参数即可，代码如下：

.. code-block:: python
    :linenos:

    import pandas as pd
    # 这两个参数的默认设置都是False
    pd.set_option('display.unicode.ambiguous_as_wide', True)
    pd.set_option('display.unicode.east_asian_width', True)

pandas的数据对象。如果直接在命令行界面输入。会输出对应的数据。但是一般很多时会省略输出。而且多行时会显示不全。


所以一般可以查看数据可以分为以下几种：
    - 查看前5行(或指定的前n行)
    - 查看最后5行(或指定的从最后往前数n行)
    - 查看指定行/多行
    - 查看指定列/多列
    - 查看指定列指定行的元素
    - 查看范围列和范围行的元素


查看前5行(或指定的前n行)
======================================================================================================================================================

下面是先创建df这个dataframe对象，然后df.head()这个函数默认浏览df的前5行，也可以指定前n行

.. code-block:: python
    :linenos:

    In [1]: import pandas as pd
    In [2]: pd.set_option('display.unicode.ambiguous_as_wide', True)
    In [3]: pd.set_option('display.unicode.east_asian_width', True)
    In [4]: import numpy as np
    In [6]: dates = pd.date_range('20130101', periods=6)
    In [7]: df = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('
    ...: D'))

    In [8]: df
    Out[8]:
                    A         B         C         D
    2013-01-01  0.445214  0.349077 -0.564754 -2.803565
    2013-01-02 -0.176071 -1.338510  0.376236 -0.365999
    2013-01-03  0.052448 -1.025863  0.860846  0.236217
    2013-01-04 -0.194436 -0.951028  1.584481 -1.068796
    2013-01-05  0.875146  0.759051 -0.914008 -0.608213
    2013-01-06  0.385716 -0.799709  0.265908  0.597447

    In [9]: df.head()
    Out[9]:
                    A         B         C         D
    2013-01-01  0.445214  0.349077 -0.564754 -2.803565
    2013-01-02 -0.176071 -1.338510  0.376236 -0.365999
    2013-01-03  0.052448 -1.025863  0.860846  0.236217
    2013-01-04 -0.194436 -0.951028  1.584481 -1.068796
    2013-01-05  0.875146  0.759051 -0.914008 -0.608213

    In [10]: df.head(3)
    Out[10]:
                    A         B         C         D
    2013-01-01  0.445214  0.349077 -0.564754 -2.803565
    2013-01-02 -0.176071 -1.338510  0.376236 -0.365999
    2013-01-03  0.052448 -1.025863  0.860846  0.236217


查看最后5行(或指定的从最后往前数n行)
======================================================================================================================================================


下面是先创建df这个dataframe对象，然后df.tail()这个函数默认浏览df的末尾5行，也可以指定末尾n行

.. code-block:: python
    :linenos:

    In [1]: import pandas as pd
    In [2]: pd.set_option('display.unicode.ambiguous_as_wide', True)
    In [3]: pd.set_option('display.unicode.east_asian_width', True)
    In [4]: import numpy as np
    In [6]: dates = pd.date_range('20130101', periods=6)
    In [7]: df = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('
    ...: D'))

    In [8]: df
    Out[8]:
                    A         B         C         D
    2013-01-01  0.445214  0.349077 -0.564754 -2.803565
    2013-01-02 -0.176071 -1.338510  0.376236 -0.365999
    2013-01-03  0.052448 -1.025863  0.860846  0.236217
    2013-01-04 -0.194436 -0.951028  1.584481 -1.068796
    2013-01-05  0.875146  0.759051 -0.914008 -0.608213
    2013-01-06  0.385716 -0.799709  0.265908  0.597447

    In [11]: df.tail()
    Out[11]:
                    A         B         C         D
    2013-01-02 -0.176071 -1.338510  0.376236 -0.365999
    2013-01-03  0.052448 -1.025863  0.860846  0.236217
    2013-01-04 -0.194436 -0.951028  1.584481 -1.068796
    2013-01-05  0.875146  0.759051 -0.914008 -0.608213
    2013-01-06  0.385716 -0.799709  0.265908  0.597447

    In [12]: df.tail(2)
    Out[12]:
                    A         B         C         D
    2013-01-05  0.875146  0.759051 -0.914008 -0.608213
    2013-01-06  0.385716 -0.799709  0.265908  0.597447


查看指定行/多行
======================================================================================================================================================

下面是先创建df这个dataframe对象，然后 ``df[m:n]`` 查看df的m+1行到n-1行。
    - 如果省略m，则从第一行开始
    - 如果省略n，则从m+1行到最后一行
    - DataFrame.iloc[]：方括号内需要是行号(整数)，如果只有一个

.. code-block:: python
    :linenos:

    In [1]: import pandas as pd
    In [2]: pd.set_option('display.unicode.ambiguous_as_wide', True)
    In [3]: pd.set_option('display.unicode.east_asian_width', True)
    In [4]: import numpy as np
    In [6]: dates = pd.date_range('20130101', periods=6)
    In [7]: df = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('
    ...: D'))

    In [8]: df
    Out[8]:
                    A         B         C         D
    2013-01-01  0.445214  0.349077 -0.564754 -2.803565
    2013-01-02 -0.176071 -1.338510  0.376236 -0.365999
    2013-01-03  0.052448 -1.025863  0.860846  0.236217
    2013-01-04 -0.194436 -0.951028  1.584481 -1.068796
    2013-01-05  0.875146  0.759051 -0.914008 -0.608213
    2013-01-06  0.385716 -0.799709  0.265908  0.597447

    In [17]: df[1:5]
    Out[17]:
                    A         B         C         D
    2013-01-02 -0.176071 -1.338510  0.376236 -0.365999
    2013-01-03  0.052448 -1.025863  0.860846  0.236217
    2013-01-04 -0.194436 -0.951028  1.584481 -1.068796
    2013-01-05  0.875146  0.759051 -0.914008 -0.608213

用行的索引值取行，返回Series类型：

    In [28]: df
    Out[28]:
                    A         B         C         D
    2013-01-01  0.445214  0.349077 -0.564754 -2.803565
    2013-01-02 -0.176071 -1.338510  0.376236 -0.365999
    2013-01-03  0.052448 -1.025863  0.860846  0.236217
    2013-01-04 -0.194436 -0.951028  1.584481 -1.068796
    2013-01-05  0.875146  0.759051 -0.914008 -0.608213
    2013-01-06  0.385716 -0.799709  0.265908  0.597447

    In [30]: df.loc['2013-01-03']
    Out[30]:
    A    0.052448
    B   -1.025863
    C    0.860846
    D    0.236217
    Name: 2013-01-03 00:00:00, dtype: float64


查看指定列/多列
======================================================================================================================================================

选择指定列的方法有两种：
    - 返回Series类型，eg：下面的 ``df.A`` 返回的是Series类型
    - 返回DataFrame类型


下面是先创建df这个dataframe对象:

.. code-block:: python
    :linenos:

    In [1]: import pandas as pd
    In [2]: pd.set_option('display.unicode.ambiguous_as_wide', True)
    In [3]: pd.set_option('display.unicode.east_asian_width', True)
    In [4]: import numpy as np
    In [6]: dates = pd.date_range('20130101', periods=6)
    In [7]: df = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('
    ...: D'))

    In [8]: df
    Out[8]:
                    A         B         C         D
    2013-01-01  0.445214  0.349077 -0.564754 -2.803565
    2013-01-02 -0.176071 -1.338510  0.376236 -0.365999
    2013-01-03  0.052448 -1.025863  0.860846  0.236217
    2013-01-04 -0.194436 -0.951028  1.584481 -1.068796
    2013-01-05  0.875146  0.759051 -0.914008 -0.608213
    2013-01-06  0.385716 -0.799709  0.265908  0.597447

返回Series类型,选择列名为A的列：

.. code-block:: python
    :linenos:

    In [18]: df.A
    Out[18]:
    2013-01-01    0.445214
    2013-01-02   -0.176071
    2013-01-03    0.052448
    2013-01-04   -0.194436
    2013-01-05    0.875146
    2013-01-06    0.385716
    Freq: D, Name: A, dtype: float64

返回DataFrame类型，选择列名为A的列。或者选择列名为A和B的两列：

.. code-block:: python
    :linenos:

    In [21]: df[['A']]
    Out[21]:
                    A
    2013-01-01  0.445214
    2013-01-02 -0.176071
    2013-01-03  0.052448
    2013-01-04 -0.194436
    2013-01-05  0.875146
    2013-01-06  0.385716

    In [22]: df[['A','B']]
    Out[22]:
                    A         B
    2013-01-01  0.445214  0.349077
    2013-01-02 -0.176071 -1.338510
    2013-01-03  0.052448 -1.025863
    2013-01-04 -0.194436 -0.951028
    2013-01-05  0.875146  0.759051
    2013-01-06  0.385716 -0.799709


查看指定列指定行的元素
======================================================================================================================================================

.. tip::
    - DataFrame.at：是通过行标签和列标签取值
    - DataFrame.iat：是通过行序号和列序号取值（序号是整数值）
    - 序号都是从0还是。

.. code-block:: python
    :linenos:

    In [28]: df
    Out[28]:
                    A         B         C         D
    2013-01-01  0.445214  0.349077 -0.564754 -2.803565
    2013-01-02 -0.176071 -1.338510  0.376236 -0.365999
    2013-01-03  0.052448 -1.025863  0.860846  0.236217
    2013-01-04 -0.194436 -0.951028  1.584481 -1.068796
    2013-01-05  0.875146  0.759051 -0.914008 -0.608213
    2013-01-06  0.385716 -0.799709  0.265908  0.597447

    In [29]: df.iat[1,2]
    Out[29]: 0.37623648848957786



查看范围列和范围行的元素
======================================================================================================================================================


